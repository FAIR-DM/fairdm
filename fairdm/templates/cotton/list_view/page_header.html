<c-vars show_info_button="True"
        search_placeholder="Search objects..."
        info_modal_target="#pageInfoModal"
        filter_offcanvas_target="#filterOffcanvas" />
<div class="mb-4">
  <!-- Desktop: Title Row with Search and Sort -->
  <div class="d-none d-lg-flex justify-content-between align-items-center mb-3">
    <div>
      <h2 class="h4 mb-1">
        {{ title }}
        {% if show_info_button %}
          <button type="button"
                  class="btn btn-link p-0 ms-2 text-muted page-info-btn"
                  data-bs-toggle="modal"
                  data-bs-target="{{ info_modal_target }}"
                  aria-label="Page Information">
            <c-icon name="info-circle" />
          </button>
        {% endif %}
      </h2>
      <p class="text-muted mb-0">{{ results_text }}</p>
    </div>
    <div class="d-flex gap-3 align-items-center">
      <!-- Search Bar -->
      <div class="input-group" style="min-width: 300px;">
        <span class="input-group-text border-end-0">
          <c-icon name="search" class="text-muted" />
        </span>
        <!-- Visible search input for desktop -->
        <input type="text"
               class="form-control border-start-0 search-field desktop-search"
               placeholder="{{ search_placeholder }}"
               value="{{ filter.form.search.value|default:'' }}" />
      </div>
      <!-- Sort -->
      {% if filter.form.o %}
        <div class="input-group" style="min-width: 180px;">
          <span class="input-group-text border-end-0">
            <c-icon name="sort-down" class="text-muted" />
          </span>
          <select class="form-select ordering-field desktop-ordering border-start-0"
                  form="">
            {% for value, label in filter.form.o.field.choices %}
              {% if value %}
                <option value="{{ value }}"
                        {% if filter.form.o.value == value %}selected{% endif %}>{{ label }}</option>
              {% endif %}
            {% endfor %}
          </select>
        </div>
      {% endif %}
    </div>
  </div>
  <!-- Mobile: Title Row with Filter Button -->
  <div class="d-flex d-lg-none justify-content-between align-items-start mb-3">
    <div class="flex-grow-1">
      <h2 class="h4 mb-1">
        {{ title }}
        {% if show_info_button %}
          <button type="button"
                  class="btn btn-link p-0 ms-2 text-muted page-info-btn"
                  data-bs-toggle="modal"
                  data-bs-target="{{ info_modal_target }}"
                  aria-label="Page Information">
            <c-icon name="info-circle" />
          </button>
        {% endif %}
      </h2>
      <p class="text-muted mb-0">{{ results_text }}</p>
    </div>
    <button class="btn btn-outline-secondary btn-sm"
            type="button"
            data-bs-toggle="offcanvas"
            data-bs-target="{{ filter_offcanvas_target }}"
            aria-controls="filterOffcanvas">
      <c-icon name="funnel-fill" class="me-1" />
      Filters
    </button>
  </div>
  <!-- Mobile: Search and Sort Row -->
  <div class="d-flex d-lg-none gap-2">
    <!-- Search Bar (expands to fill available space) -->
    <div class="flex-grow-1">
      <div class="input-group">
        <span class="input-group-text border-end-0">
          <c-icon name="search" class="text-muted" />
        </span>
        <!-- Visible search input for mobile -->
        <input type="text"
               class="form-control border-start-0 search-field mobile-search"
               placeholder="{{ search_placeholder }}"
               value="{{ filter.form.search.value|default:'' }}" />
      </div>
    </div>
    <!-- Sort (minimal width) -->
    <div class="flex-shrink-0">
      {% if filter.form.o %}
        <div class="input-group" style="min-width: 140px;">
          <span class="input-group-text border-end-0">
            <c-icon name="sort-down" class="text-muted" />
          </span>
          <select class="form-select ordering-field mobile-ordering border-start-0"
                  form="">
            {% for value, label in filter.form.o.field.choices %}
              {% if value %}
                <option value="{{ value }}"
                        {% if filter.form.o.value == value %}selected{% endif %}>{{ label }}</option>
              {% endif %}
            {% endfor %}
          </select>
        </div>
      {% else %}
        <div class="input-group" style="min-width: 140px;">
          <span class="input-group-text border-end-0">
            <c-icon name="sort-down" class="text-muted" />
          </span>
          <select class="form-select ordering-field mobile-ordering border-start-0"
                  form="">
            <option selected>Order by</option>
          </select>
        </div>
      {% endif %}
    </div>
  </div>
</div>
