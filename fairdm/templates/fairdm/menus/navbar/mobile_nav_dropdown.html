{% load flex_menu %}

{% if depth == 1 %}
  {# Top-level parent: always open, no toggle #}
  <c-navbar.mobile.section text="{{ label }}" icon="{{ icon }}">
    {% for child in children %}
      {% render_item child renderer=renderer %}
    {% endfor %}
  </c-navbar.mobile.section>
{% else %}
  {# Nested dropdown: collapsible #}
  <c-navbar.mobile.dropdown text="{{ label }}"
                            icon="{{ icon }}"
                            id="mobile-{{ label|slugify }}-{{ depth }}">
    {% for child in children %}
      {% render_item child renderer=renderer %}
    {% endfor %}
  </c-navbar.mobile.dropdown>
{% endif %}
