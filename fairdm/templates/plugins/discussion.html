{% load comments comments_xtd fairdm %}

{% get_comment_count for base_object as comment_count %}
<c-layouts.plugin page_title="Discussion">
  <c-components.button icon="plus"
                       class="mb-3"
                       text="{% trans "Add comment" %}"
                       data-bs-toggle="collapse"
                       data-bs-target="#commentFormCollapse" />
  <div class="collapse" id="commentFormCollapse">
    <div class="card">
      <div class="card-body">{% render_comment_form for base_object %}</div>
    </div>
  </div>
  {% if comment_count %}
    <div class="comments py-3">{% render_xtdcomment_tree for base_object allow_flagging allow_feedback %}</div>
  {% endif %}
</c-layouts.plugin>
